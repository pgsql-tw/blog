## [CVE-2018-1058](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-1058)的處理策略
### 保護你的搜尋路徑

---

## A Guide to CVE-2018-1058: Protect Your Search Path
- 可直接參閱 [PostgreSQL wiki](https://wiki.postgresql.org/wiki/A_Guide_to_CVE-2018-1058:_Protect_Your_Search_Path) 說明內容
- 本簡報依據該文件內容製作而成

---

## 什麼是 CVE-2018-1058
CVE-2018-1058 描述了使用者如何在不同 schema 下建立類似名稱的物件，這些方式可以改變其他使用者查詢的行為並導致意外或惡意行為，也稱為「特洛伊木馬」攻擊。

↓

+++

#### 簡而言之，透過 schema 搜尋路徑設定上的不嚴謹，產生惡意行為的風險。

例如：
```
SELECT * FROM table_a;
```
等同於
```
SELECT * FROM public.table_a;
```
↓

+++
### 舉例來說，如果 SESSION_USER 是 alice：

```
CREATE TABLE alice.a AS SELECT 1::int AS id;
CREATE TABLE public.a AS SELECT 'a'::text AS id;
```

接下來如果 alice 執行下面語法的話，那她會得到下面的結果：
```
SELECT * FROM a;

  id 
----
  1
```

也就是得到 alica.a 的內容。

↓
---
